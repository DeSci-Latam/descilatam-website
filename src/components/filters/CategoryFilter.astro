---
import { useTranslations } from "@/i18n";
import { getCategories } from "@/utils/post";
import type { Lang } from "@/i18n";

const { locale, category } = Astro.props;
const t = useTranslations(locale as Lang);

const categories = await getCategories(locale as Lang);

---

<div class="flex flex-wrap gap-3 my-6">
  <a
    href={`/${locale}/blog/`}
    class={`px-3 py-1 rounded-full text-sm ${
      !category
        ? "bg-primary text-primary-foreground"
        : "bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"
    }`}
  >
    {t("all")}
  </a>
  {
    categories.map((cat) => (
      <a
        href={`/${locale}/blog/category/${cat}/`}
        class={`px-3 py-1 rounded-full text-sm ${
          category === cat
            ? "bg-primary text-primary-foreground"
            : "bg-muted text-muted-foreground hover:bg-primary hover:text-primary-foreground"
        }`}
      >
        {cat}
      </a>
    ))
  }
</div>