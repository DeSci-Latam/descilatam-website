import{r as t}from"./index.9AF9g4V4.js";import{r as h}from"./index.uGIPC8rq.js";import{$ as A}from"./index.9QiOUCPV.js";function _(e,n,{checkForDefaultPrevented:o=!0}={}){return function(c){if(e?.(c),o===!1||!c.defaultPrevented)return n?.(c)}}function U(e,n=[]){let o=[];function r(d,a){const i=t.createContext(a),u=o.length;o=[...o,a];function s(f){const{scope:m,children:$,...p}=f,b=m?.[e][u]||i,x=t.useMemo(()=>p,Object.values(p));return t.createElement(b.Provider,{value:x},$)}function l(f,m){const $=m?.[e][u]||i,p=t.useContext($);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${d}\``)}return s.displayName=d+"Provider",[s,l]}const c=()=>{const d=o.map(a=>t.createContext(a));return function(i){const u=i?.[e]||d;return t.useMemo(()=>({[`__scope${e}`]:{...i,[e]:u}}),[i,u])}};return c.scopeName=e,[r,S(c,...n)]}function S(...e){const n=e[0];if(e.length===1)return n;const o=()=>{const r=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(d){const a=r.reduce((i,{useScope:u,scopeName:s})=>{const f=u(d)[`__scope${s}`];return{...i,...f}},{});return t.useMemo(()=>({[`__scope${n.scopeName}`]:a}),[a])}};return o.scopeName=n.scopeName,o}const N=globalThis?.document?t.useLayoutEffect:()=>{};function I(e){const n=t.useRef(e);return t.useEffect(()=>{n.current=e}),t.useMemo(()=>(...o)=>{var r;return(r=n.current)===null||r===void 0?void 0:r.call(n,...o)},[])}const M=t.createContext(void 0);function R(e){const n=t.useContext(M);return e||n||"ltr"}function C(e,n){return t.useReducer((o,r)=>{const c=n[o][r];return c??o},e)}const P=e=>{const{present:n,children:o}=e,r=T(n),c=typeof o=="function"?o({present:r.isPresent}):t.Children.only(o),d=A(r.ref,c.ref);return typeof o=="function"||r.isPresent?t.cloneElement(c,{ref:d}):null};P.displayName="Presence";function T(e){const[n,o]=t.useState(),r=t.useRef({}),c=t.useRef(e),d=t.useRef("none"),a=e?"mounted":"unmounted",[i,u]=C(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{const s=v(r.current);d.current=i==="mounted"?s:"none"},[i]),N(()=>{const s=r.current,l=c.current;if(l!==e){const m=d.current,$=v(s);e?u("MOUNT"):$==="none"||s?.display==="none"?u("UNMOUNT"):u(l&&m!==$?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,u]),N(()=>{if(n){const s=f=>{const $=v(r.current).includes(f.animationName);f.target===n&&$&&h.flushSync(()=>u("ANIMATION_END"))},l=f=>{f.target===n&&(d.current=v(r.current))};return n.addEventListener("animationstart",l),n.addEventListener("animationcancel",s),n.addEventListener("animationend",s),()=>{n.removeEventListener("animationstart",l),n.removeEventListener("animationcancel",s),n.removeEventListener("animationend",s)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:t.useCallback(s=>{s&&(r.current=getComputedStyle(s)),o(s)},[])}}function v(e){return e?.animationName||"none"}export{U as $,I as a,_ as b,N as c,R as d,P as e};
